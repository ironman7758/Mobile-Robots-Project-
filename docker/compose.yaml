services:
#Name of the container:
  joy:
    image: mobrobproject:v2 #Name of the image
    container_name: joy #Name of the container
    network_mode: host
    #devices: [ "dev/ttyUSB0:/dev/ttyUSB0" ]
    #build:
    #  context: .
    #  ssh: [ "default=$HOME/.ssh/id_rsa" ]
    #  target: staging #pull from the current folder
    tty: True
    stdin_open: True
    #command: ros2 launch master lowlevel.launch.py params_file:=/lowlevel_config
    #This container open to run this node
    command: ros2 run joy joy_node #&& ros2 run teleop_twist_joy teleop_node
    #configs:
      # - lowlevel_config
      #joy config here

    #The volumes here (Specifically 'bind') mount existing folders to the container
    volumes:
#    - type: bind
#      source: /dev/shm
#      target: dev/shm
    - type: bind
      source: /dev
      target: /dev
    - type: bind
      source: ./ros_ws
      target: /workspace/ros_ws

    #cgroup rules allow devices to be passed into the container
    device_cgroup_rules:
    - 'c 188:* rmw'
    - 'c 189:* rmw'
    - 'c 13:* rmw'
    #- 'c 4:* rmw'